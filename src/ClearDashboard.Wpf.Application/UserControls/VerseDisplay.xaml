<UserControl
    x:Class="ClearDashboard.Wpf.Application.UserControls.VerseDisplay"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:ClearDashboard.Wpf.Application.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:ClearDashboard.Wpf.Application.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <UserControl.Resources>

        <DataTemplate x:Key="TokenBubble">
            <local:TokenDisplay
                HorizontalAlignment="Left"
                DataContext="{Binding}"
                FilterPins="OnFilterPins"
                FlowDirection="LeftToRight"
                FontSize="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=FontSize}"
                HorizontalSpacing="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=HorizontalSpacing}"
                NoteCreate="OnNoteCreate"
                NoteIndicatorColor="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=NoteIndicatorColor}"
                NoteIndicatorHeight="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=NoteIndicatorHeight}"
                NoteLeftButtonDown="OnNoteLeftButtonDown"
                NoteLeftButtonUp="OnNoteLeftButtonUp"
                NoteMouseEnter="OnNoteMouseEnter"
                NoteMouseLeave="OnNoteMouseLeave"
                NoteMouseWheel="OnNoteMouseWheel"
                NoteRightButtonDown="OnNoteRightButtonDown"
                NoteRightButtonUp="OnNoteRightButtonUp"
                Orientation="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=Orientation}"
                SelectedTokenBackground="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=SelectedTokenBackground}"
                ShowNoteIndicator="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=ShowNoteIndicators}"
                ShowTranslation="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=ShowTranslations}"
                TokenClicked="OnTokenClicked"
                TokenDoubleClicked="OnTokenDoubleClicked"
                TokenLeftButtonDown="OnTokenLeftButtonDown"
                TokenLeftButtonUp="OnTokenLeftButtonUp"
                TokenMouseEnter="OnTokenMouseEnter"
                TokenMouseLeave="OnTokenMouseLeave"
                TokenMouseWheel="OnTokenMouseWheel"
                TokenRightButtonDown="OnTokenRightButtonDown"
                TokenRightButtonUp="OnTokenRightButtonUp"
                TokenVerticalSpacing="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokenVerticalSpacing}"
                TranslateQuick="OnTranslateQuick"
                TranslationAlignment="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TranslationAlignment}"
                TranslationClicked="OnTranslationClicked"
                TranslationDoubleClicked="OnTranslationDoubleClicked"
                TranslationFlowDirection="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TranslationFlowDirection}"
                TranslationFontFamily="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TranslationFontFamily}"
                TranslationFontSize="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TranslationFontSize}"
                TranslationLeftButtonDown="OnTranslationLeftButtonDown"
                TranslationLeftButtonUp="OnTranslationLeftButtonUp"
                TranslationMouseEnter="OnTranslationMouseEnter"
                TranslationMouseLeave="OnTranslationMouseLeave"
                TranslationMouseWheel="OnTranslationMouseWheel"
                TranslationRightButtonDown="OnTranslationRightButtonDown"
                TranslationRightButtonUp="OnTranslationRightButtonUp"
                TranslationVerticalSpacing="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TranslationVerticalSpacing}" />
        </DataTemplate>
        <ItemsPanelTemplate x:Key="WrapPanelTemplate">
            <WrapPanel Orientation="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=Orientation}" />
        </ItemsPanelTemplate>
        <ItemsPanelTemplate x:Key="StackPanelTemplate">
            <StackPanel HorizontalAlignment="Left" Orientation="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=Orientation}" />
        </ItemsPanelTemplate>
    </UserControl.Resources>
    <StackPanel Orientation="Vertical">
        <TextBlock
            Margin="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TitleMargin}"
            Padding="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TitlePadding}"
            HorizontalAlignment="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TitleHorizontalAlignment}"
            FlowDirection="LeftToRight"
            FontSize="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TitleFontSize}"
            Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=Title}"
            Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TitleVisibility}" />
        <Border
            Margin="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensMargin}"
            Padding="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensPadding}"
            Background="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensBackground}"
            BorderBrush="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensBorderBrush}"
            BorderThickness="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensBorderThickness}">
            <ItemsControl
                FlowDirection="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=IsRtl}"
                ItemTemplate="{StaticResource TokenBubble}"
                ItemsPanel="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=ItemsPanelTemplate}"
                ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=Tokens}" />
            <!--    -->
        </Border>
        <Border
            Margin="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensMargin}"
            Padding="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensPadding}"
            Background="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TestBackground}"
            BorderBrush="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensBorderBrush}"
            BorderThickness="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TokensBorderThickness}"
            Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TargetVisibility}">
            <ItemsControl
                FlowDirection="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=IsTargetRtl}"
                ItemTemplate="{StaticResource TokenBubble}"
                ItemsPanel="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=ItemsPanelTemplate}"
                ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TargetTokens}"
                Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, Path=TargetVisibility}" />

            <!--    -->
        </Border>
    </StackPanel>
</UserControl>
